var Protocol = {
    ele: $('.span'),
    into_url: 'http://d.easemob.com',
    protocol_text: '<div class="bigdata_protocol">' +
    '<div class="bigdata_protocol_hd">'+
    '<div i="title" class="bigdata_logo ">'+

    '</div>'+
    '</div>'+
    '<div class="bigdata_protocol_bd">'+
    '<div class="bigdata_protocol_content">'+
    '<div class="bigdata_protocol_content_hd">'+
    '《环信大数据平台补充协议》'+
    '</div>'+
    '<div class="bigdata_protocol_content_bd"> <div class="bigdata_text_wrap">'+
    '<p>'+
    '本网站及其服务是由北京倍丰科技有限公司及其关联公司（统称“环信”或“乙方”）基于以下条款和条件提供。当您（统称“甲方”或“用户”）访问本网站或接受本网站提供的相关服务时，请务必认真阅读和理解本协议中规定的所有内容。乙方向甲方提供的服务还需要甲方遵守其他条款及服务准则，甲方应同时阅读了解。甲方访问、浏览本网站内容，或以勾选同意方式注册、登陆本网站，或以任何方式使用本网站提供的服务时，即表示甲方同意接受本条款以及其他条款和服务准则的约束。'+
    '</p>'+
    '<p>'+
    '<h3> 一、使用前提 </h3>'+

    '</p>'+
    '<p>'+
    '1.本网站及服务仅针对18周岁以上具有完全民事行为能力的自然人及依住所地法律合法登记并有效存续的企业法人提供。如甲方不符合资格，请勿继续使用乙方所提供的服务，并且，乙方有权随时终止向您提供服务。'+
    '2.如果甲方使用本网站服务，甲方应向乙方提供现有的、完整的和准确的注册信息，以获取乙方向甲方提供的注册账户和密码。在服务使用期间，甲方承诺随时向乙方更新甲方的注册信息。乙方不会为错误的、虚假的或不完整的账户信息负责，并有权随时停止提供服务。'+
    '3.为了维护甲方的账户的保密性，甲方应采取必要措施限制对自己的计算机或移动设备未经授权的使用/访问，并确保甲方的登陆密码未向任何第三方透露。甲方同意对在自己的账户下或已登录的设备中发生的所有活动承担责任。账户及密码信息如有遗失或泄露，甲方有义务立刻通知乙方并更改密码，以保证甲方账户的安全性和正常使用。乙方不会对甲方账户密码的非授权使用所引起的任何损失、责任和权利主张承担责任。'+
    '</p>'+
    '<p>'+
    '<h3>二、服务内容</h3>'+
    '</p>'+
    '<p>'+
    '乙方提供的分析服务，是指乙方通过数据分析工具对所提供的数据进行统计和分析服务，该服务按照分析工具的功能现状所提供，并由甲方的需求选择使用。'+
    '1.甲方授权乙方使用甲方数据，对该数据进行分类，归属和分析，并仅对甲方呈现。'+
    '（1）乙方仅提供数据分析服务，不得碰触信息内容或向第三方公开、透露用户隐私信息。'+
    '（2）乙方对甲方的数据进行分类，挖掘，并将结果按乙方设定展现给甲方。'+
    '2.甲方对数据的挖掘结果有唯一使用权，乙方对数据的挖掘结果具有所有权、知识产权和最终解释权。'+
    '3.除与乙方的特殊约定外，甲方不得将乙方的数据用于任何商业目的。任何说明性引用或者经授权的商业性使用，需要得到乙方授权，并标明来源于乙方，知识产权属于乙方。'+
    '</p>'+
    '<p>'+
    '<h3>二、服务费用</h3>'+
    '</p>'+
    '<p>'+
    '乙方的服务分为免费服务和收费服务。收费服务及收费方式详见各个产品页面介绍，并以双方最终达成的书面协议为准。'+
    '乙方保留随时更改收费方式和收费标准的权利，但对于已签署书面协议确定价格的除外。'+
    '</p>'+
    '<p>'+
    '<h3>三、服务变更及补偿办法</h3>'+
    '</p>'+
    '<p>'+
    '1.本服务同大多数互联网服务一样，受包括但不限于用户原因、网络服务质量、社会环境等因素的影响。'+
    '2.鉴于网络服务的特殊性，甲方同意乙方有权随时变更、中断或终止服务（包括收费服务）。乙方变更、中断或终止的服务，应当在变更、中断或终止之前通知甲方，并提供等值的替代性的服务；如甲方不愿意接受替代性的服务，且已经向乙方支付的虚拟货币，乙方应当按照该用户实际使用服务的情况扣除相应虚拟货币之后将剩余的虚拟货币退还甲的账户中。'+
    '3.如发生下列任何一种情形，乙方有权变更、中断或终止向甲方提供的免费服务或收费服务，而无需对甲方或任何第三方承担任何责任：'+
    '(1) 甲方违反相关法律法规或本协议的约定；'+
    '(2) 乙方按照法律规定或有权机关的要求；'+
    '(3) 出于安全的原因或其他必要的情形。'+
    '</p>'+
    '<p>'+
    '<h3>四、适用法律</h3>'+
    '</p>'+
    '<p>'+
    '甲方同意本服务条款和使用条件以及甲、乙方之间发生的任何争议均适用中华人民共和国法律。'+
    '</p>'+
    '<p>'+
    '<h3>五、争议</h3>'+
    '</p>'+
    '<p>'+
    '有关与甲方和乙方之间发生的任何形式的争议均应友好协商解决，协商不成的，双方同意提交北京仲裁委员会根据其届时有效的仲裁规则在北京申请仲裁裁决。'+
    '</p>'+
    '<p>'+
    '<h3>六、协议修改和可分性</h3>'+
    '</p>'+
    '<p>'+
    '为更好地提供服务并符合相关监管政策，乙方可能随时修改上述条款。请甲方定期查阅本条款。乙方会在网页上公布这些条款的修改通知，并列明最近的修改日期。如甲方不同意我们对相应条款作出的修改，甲方应立即停止使用乙方所提供的服务。如果本条款中任何一条被视为废止、无效或因任何理由不可执行，该使用条件应视为可分割的且不影响任何其余条款的有效性和可执行性。'+
    '</p>'+
    '<p>'+
    '<h3>七、效力</h3>'+
    '</p>'+
    '<p>'+
    '本服务条款是用户使用乙方相关服务的通用条款，一经用户接受服务即具有法律约束力，也是用户与乙方另行达成并签署的书面协议的重要组成部分。本条款内容与书面协议有冲突时，以书面协议约定为准。'+
    '</p>'+
    '</div></div>'+

    '</div>'+
    '</div>'+
    '<div class="bigdata_protocol_ft clearfix">'+
    '<span data-id="cancel" class="bigdata_protocol_no" autofocus>取消</span>'+
    '<span class="bigdata_protocol_yes_waiting">接受</span>'+
    '</div>'+
    '</div>',
    init: function () {
        this.addEvent();
    },
    addEvent: function () {

        var that = this;

        this.ele.on('click', function () {
            var d = dialog({
                skin: 'bigdata_style',
                title: '',
                content: that.protocol_text,
                ok: function () {
                    var dialog = this;
                    // var that = this;
                    // this.title('正在提交..');
                    // setTimeout(function () {
                    //     that.close().remove();
                    // }, 2000);
                    //window.location.href=that.into_url;

                    window.open(that.into_url,'_blank');
                    dialog.close().remove();
                    return false;
                },
                cancel: function () {
                    return true;
                }
            });

            d.showModal();

        });


        $(document).unbind().on('mouseenter', ".bigdata_protocol_content_bd", function () {

            var bigdata_protocal_content_bd_height = $(this).height();
            var bigdata_text_wrap_height = $('.bigdata_text_wrap').height();
            var timer = null;
            var bigdata_protocol_ft = $('.bigdata_protocol_ft span');

            $(this).unbind().on('scroll', function () {

                if (bigdata_text_wrap_height - $(this).scrollTop() == bigdata_protocal_content_bd_height) {
                    //console.log('ok');

                    clearInterval(timer);

                    timer = setInterval(function () {
                        if(bigdata_protocol_ft.eq(1).hasClass('bigdata_protocol_yes_waiting')) {
                            bigdata_protocol_ft.eq(1).removeClass('bigdata_protocol_yes_waiting');
                            bigdata_protocol_ft.eq(1).addClass('bigdata_protocol_yes');
                            bigdata_protocol_ft.eq(1).attr('data-id','ok');
                        }
                        clearInterval(timer);
                    }, 0);

                }

            });
        });


    }
};